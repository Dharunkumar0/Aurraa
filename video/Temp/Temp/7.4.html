<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Addition & Subtraction of Fractions - Space Theme</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: radial-gradient(circle at top, #0b132b, #000000 80%);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    .card {
      background: rgba(0, 0, 0, 0.65);
      border-radius: 20px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.7);
      width: 95%;
      max-width: 950px;
      padding: 20px;
      text-align: center;
      color: white;
    }
    h2, h3 {
      margin: 5px 0;
      text-shadow: 0 0 15px #ffeb3b;
    }
    svg {
      width: 100%;
      height: auto;
    }
    .caption {
      font-size: 1rem;
      margin-top: 12px;
      background: rgba(255,255,255,0.1);
      padding: 8px 16px;
      border-radius: 10px;
      display: inline-block;
    }
    button, select {
      margin: 8px;
      padding: 10px 16px;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      cursor: pointer;
    }
    #replayBtn { background: linear-gradient(90deg,#ff7043,#ff5722); color: #fff; display: none; }
    #pauseBtn { background: linear-gradient(90deg,#00e676,#00c853); color: #fff; }
    select { border: 1px solid #ccc; padding: 6px 12px; }

    .fracText { font-weight: bold; font-size: 18px; fill: #fff; }

    /* Stars */
    .star { 
      fill: white; 
      opacity: 0.6; 
      filter: drop-shadow(0 0 3px white);
      animation: twinkle 2s infinite alternate;
    }
    @keyframes twinkle { 
      from { opacity: 0.2; transform: scale(0.9); } 
      to { opacity: 1; transform: scale(1.1); } 
    }

    /* Fraction Bars */
    .fracBarBg { fill: rgba(255,255,255,0.2); stroke: white; stroke-width: 2; rx: 5; ry: 5; }
    .fracBarFill { fill: #4D96FF; rx: 5; ry: 5; }

    @media(max-width:600px) {
      .fracText { font-size: 14px; }
      .caption { font-size: 0.85rem; }
    }
  </style>
</head>
<body>
  <div class="card">
    <h2>Fractions</h2>
    <h3>Addition & Subtraction of Fractions</h3>

    <label for="langSelect">üåê Language:</label>
    <select id="langSelect">
      <option value="en">English</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
      <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
      <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</option>
    </select>

    <svg viewBox="0 0 900 400">
      <!-- Starry background -->
      <g id="stars">
        <!-- Large stars -->
        <circle class="star" cx="50" cy="50" r="2.5" style="animation-duration:2s"/>
        <circle class="star" cx="150" cy="90" r="3" style="animation-duration:2.3s"/>
        <circle class="star" cx="400" cy="40" r="2.8" style="animation-duration:1.8s"/>
        <circle class="star" cx="600" cy="70" r="2.2" style="animation-duration:2.6s"/>
        <circle class="star" cx="750" cy="100" r="3.2" style="animation-duration:2.1s"/>
        <circle class="star" cx="850" cy="50" r="2.4" style="animation-duration:2.4s"/>

        <!-- Medium stars -->
        <circle class="star" cx="100" cy="200" r="1.8" style="animation-duration:3s"/>
        <circle class="star" cx="300" cy="180" r="1.6" style="animation-duration:3.2s"/>
        <circle class="star" cx="500" cy="220" r="1.9" style="animation-duration:2.7s"/>
        <circle class="star" cx="700" cy="200" r="1.7" style="animation-duration:3.1s"/>
        <circle class="star" cx="850" cy="250" r="1.5" style="animation-duration:2.9s"/>

        <!-- Small stars -->
        <circle class="star" cx="80" cy="300" r="1" style="animation-duration:4s"/>
        <circle class="star" cx="250" cy="350" r="1.2" style="animation-duration:3.8s"/>
        <circle class="star" cx="450" cy="330" r="1.1" style="animation-duration:3.5s"/>
        <circle class="star" cx="650" cy="360" r="1.3" style="animation-duration:4.2s"/>
        <circle class="star" cx="820" cy="320" r="1.2" style="animation-duration:3.7s"/>
      </g>

      <!-- Planets representing fractions -->
      <g id="frac1">
        <circle cx="75" cy="40" r="38" fill="url(#grad1)" stroke="#FFD93D" stroke-width="3"/>
        <text class="fracText" x="75" y="45" text-anchor="middle">1/2</text>
      </g>
      <g id="frac2">
        <circle cx="75" cy="40" r="38" fill="url(#grad2)" stroke="#6BCB77" stroke-width="3"/>
        <text class="fracText" x="75" y="45" text-anchor="middle">1/3</text>
      </g>

      <!-- Fraction bar visualization -->
      <rect id="barBg" class="fracBarBg" x="250" y="250" width="400" height="30" opacity="0"/>
      <rect id="barFill" class="fracBarFill" x="250" y="250" width="0" height="30" opacity="0"/>

      <defs>
        <radialGradient id="grad1" cx="30%" cy="30%" r="70%">
          <stop offset="0%" stop-color="#FFF176"/>
          <stop offset="100%" stop-color="#FBC02D"/>
        </radialGradient>
        <radialGradient id="grad2" cx="30%" cy="30%" r="70%">
          <stop offset="0%" stop-color="#A5D6A7"/>
          <stop offset="100%" stop-color="#2E7D32"/>
        </radialGradient>
      </defs>
    </svg>

    <div id="caption" class="caption">Let's learn how to add and subtract fractions!</div>
    <br>
    <button id="pauseBtn">‚è∏ Pause</button>
    <button id="replayBtn">üîÑ Replay</button>
  </div>

  <script>
    const caption = document.getElementById("caption");
    const replayBtn = document.getElementById("replayBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const langSelect = document.getElementById("langSelect");

    let paused = false;
    let stepIndex = 0;
    let currentLang = "en";

    const captions = {
      en: [
        "Let's learn how to add and subtract fractions!",
        "We have two fractions: 1/2 and 1/3.",
        "To add them, find a common denominator: 6.",
        "Convert: 1/2 = 3/6, 1/3 = 2/6.",
        "Now add: 3/6 + 2/6 = 5/6.",
        "Similarly, subtract: 3/6 - 2/6 = 1/6."
      ],
      hi: [
        "‡§Ü‡§á‡§è ‡§≠‡§ø‡§®‡•ç‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§ú‡•ã‡§°‡§º ‡§î‡§∞ ‡§ò‡§ü‡§æ‡§µ ‡§∏‡•Ä‡§ñ‡•á‡§Ç!",
        "‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡§æ‡§∏ ‡§¶‡•ã ‡§≠‡§ø‡§®‡•ç‡§® ‡§π‡•à‡§Ç: 1/2 ‡§î‡§∞ 1/3‡•§",
        "‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Æ‡§æ‡§® ‡§π‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç: 6‡•§",
        "‡§¨‡§¶‡§≤‡•á‡§Ç: 1/2 = 3/6, 1/3 = 2/6‡•§",
        "‡§Ö‡§¨ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç: 3/6 + 2/6 = 5/6‡•§",
        "‡§á‡§∏‡•Ä ‡§§‡§∞‡§π ‡§ò‡§ü‡§æ‡§è‡§Ç: 3/6 - 2/6 = 1/6‡•§"
      ],
      ta: [
        "‡Æ™‡Æï‡ØÅ‡Æ§‡Øç‡Æ§‡ØÜ‡Ææ‡Æ∞‡ØÅ‡Æ™‡Ææ‡Æü‡ØÅ‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡Æï‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æï‡Æ¥‡Æø‡Æ§‡Øç‡Æ§‡Æ≤‡Øà ‡Æï‡Æ±‡Øç‡Æ™‡Øã‡ÆÆ‡Øç!",
        "‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æü‡ÆÆ‡Øç ‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡ØÅ ‡Æ™‡Æï‡ØÅ‡Æ§‡Øç‡Æ§‡ØÜ‡Ææ‡Æ∞‡ØÅ‡Æ™‡Ææ‡Æü‡ØÅ‡Æï‡Æ≥‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ©: 1/2 ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç 1/3.",
        "‡Æï‡ØÇ‡Æü‡Øç‡Æü, ‡Æí‡Æ∞‡Øá ‡Æé‡Æ£‡Øç‡Æï‡ØÅ‡Æ±‡Æø ‡Æ§‡Øá‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç: 6.",
        "‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç: 1/2 = 3/6, 1/3 = 2/6.",
        "‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æï‡ØÇ‡Æü‡Øç‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç: 3/6 + 2/6 = 5/6.",
        "‡ÆÖ‡Æ§‡Øá‡Æ™‡Øã‡Æ≤‡Øç ‡Æï‡Æ¥‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç: 3/6 - 2/6 = 1/6."
      ],
      te: [
        "‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞≤ ‡∞Ø‡±ã‡∞ú‡∞® ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞§‡±Ä‡∞∏‡∞ø‡∞µ‡±á‡∞§ ‡∞®‡±á‡∞∞‡±ç‡∞ö‡±Å‡∞ï‡±Å‡∞Ç‡∞¶‡∞æ‡∞Ç!",
        "‡∞Æ‡∞æ‡∞ï‡±Å ‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞≠‡∞ø‡∞®‡±ç‡∞®‡∞æ‡∞≤‡±Å ‡∞â‡∞®‡±ç‡∞®‡∞æ‡∞Ø‡∞ø: 1/2 ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å 1/3.",
        "‡∞µ‡±Ä‡∞ü‡∞ø‡∞®‡∞ø ‡∞ï‡∞≤‡∞™‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞í‡∞ï‡±á ‡∞π‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞Ç‡∞°‡∞ø: 6.",
        "‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞Ç‡∞°‡∞ø: 1/2 = 3/6, 1/3 = 2/6.",
        "‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞ï‡∞≤‡∞™‡∞Ç‡∞°‡∞ø: 3/6 + 2/6 = 5/6.",
        "‡∞Ö‡∞¶‡±á ‡∞µ‡∞ø‡∞ß‡∞Ç‡∞ó‡∞æ ‡∞§‡±Ä‡∞∏‡∞ø‡∞µ‡±á‡∞Ø‡∞Ç‡∞°‡∞ø: 3/6 - 2/6 = 1/6."
      ],
      or: [
        "‡¨Ü‡¨∏‡¨®‡≠ç‡¨§‡≠Å ‡¨≠‡¨æ‡¨ó‡¨ó‡≠Å‡¨°‡¨º‡¨ø‡¨ï‡¨∞ ‡¨Ø‡≠ã‡¨ó ‡¨è‡¨¨‡¨Ç ‡¨¨‡¨ø‡≠ü‡≠ã‡¨ó ‡¨∂‡¨ø‡¨ñ‡¨ø‡¨¨‡¨æ!",
        "‡¨Ü‡¨Æ ‡¨™‡¨æ‡¨ñ‡¨∞‡≠á ‡¨¶‡≠Å‡¨á‡¨ü‡¨ø ‡¨≠‡¨æ‡¨ó ‡¨Ö‡¨õ‡¨ø: 1/2 ‡¨è‡¨¨‡¨Ç 1/3‡•§",
        "‡¨Ø‡≠ã‡¨ó ‡¨ï‡¨∞‡¨ø‡¨¨‡¨æ ‡¨™‡¨æ‡¨á‡¨Å ‡¨∏‡¨Æ‡¨æ‡¨® ‡¨π‡¨∞ ‡¨ñ‡≠ã‡¨ú‡¨®‡≠ç‡¨§‡≠Å: 6‡•§",
        "‡¨™‡¨∞‡¨ø‡¨¨‡¨∞‡≠ç‡¨§‡≠ç‡¨§‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å: 1/2 = 3/6, 1/3 = 2/6‡•§",
        "‡¨è‡¨¨‡≠á ‡¨Ø‡≠ã‡¨ó ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å: 3/6 + 2/6 = 5/6‡•§",
        "‡¨∏‡≠á‡¨π‡¨ø‡¨™‡¨∞‡¨ø ‡¨¨‡¨ø‡≠ü‡≠ã‡¨ó ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å: 3/6 - 2/6 = 1/6‡•§"
      ]
    };

    const voicesMap = { en: "en-IN", hi: "hi-IN", ta: "ta-IN", te: "te-IN", or: "or-IN" };

    function speak(text, lang, callback) {
      if (paused) return;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = voicesMap[lang] || "en-IN";
      utterance.rate = 0.95;
      utterance.onend = () => { if (!paused) callback(); };
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utterance);
    }

    function runStep() {
      if (stepIndex >= captions[currentLang].length) {
        replayBtn.style.display = "inline-block";
        return;
      }
      caption.textContent = captions[currentLang][stepIndex];

      if (stepIndex === 1) gsap.to(["#frac1","#frac2"], {duration: 0.8, scale: 1.2, yoyo: true, repeat: 1, stagger: 0.3});
      if (stepIndex === 3) {
        gsap.to("#barBg", {opacity: 1, duration: 0.5});
        gsap.to("#barFill", {opacity: 1, width: 200, duration: 1});
      }
      if (stepIndex === 4) gsap.to("#barFill", {width: 330, duration: 1, backgroundColor:"#4CAF50"});

      speak(captions[currentLang][stepIndex], currentLang, () => {
        stepIndex++;
        if (!paused) runStep();
      });
    }

    function playAnimation() {
      replayBtn.style.display = "none";
      paused = false;
      stepIndex = 0;
      currentLang = langSelect.value;
      gsap.set("#frac1", {x: 300, y: 100, scale: 1});
      gsap.set("#frac2", {x: 500, y: 100, scale: 1});
      gsap.set("#barBg", {opacity: 0});
      gsap.set("#barFill", {opacity: 0, width: 0});
      runStep();
    }

    pauseBtn.addEventListener("click", () => {
      if (!paused) { paused = true; window.speechSynthesis.cancel(); pauseBtn.textContent = "‚ñ∂ Play"; }
      else { paused = false; pauseBtn.textContent = "‚è∏ Pause"; runStep(); }
    });

    replayBtn.addEventListener("click", playAnimation);
    langSelect.addEventListener("change", () => {
      currentLang = langSelect.value;
      if (!paused) playAnimation();
      else caption.textContent = captions[currentLang][stepIndex] || captions[currentLang][0];
    });

    playAnimation();
  </script>
</body>
</html>
