<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Composition of Functions</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<style>
body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  height: 100vh;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  background: radial-gradient(circle at center, #0b0b1f 0%, #1e1e40 60%, #0b0b1f 100%);
  color: #fff;
  position: relative;
}

/* Floating math symbols */
.math-symbol {
  position: absolute;
  font-size: 16px;
  color: rgba(255,255,255,0.3);
  font-weight: bold;
  pointer-events: none;
  user-select: none;
}

/* Card container */
.card {
  background: rgba(0,0,0,0.7);
  border-radius: 16px;
  padding: 20px;
  width: 90%;
  max-width: 1000px;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.8);
  position: relative;
  z-index: 2;
}

/* SVG styling */
svg { width: 100%; height: 400px; margin-top: 20px; }
.node {
  fill: #fff;
  stroke: #fff;
  stroke-width: 2;
  font-weight: bold;
  text-anchor: middle;
  dominant-baseline: middle;
  opacity:1;
}
.edge { stroke: #FFD700; stroke-width: 2; fill: none; opacity:0; }
.comp-edge { stroke: #4D96FF; stroke-width: 2; fill: none; opacity:0; }

.caption {
  font-size: 1rem;
  margin-top: 12px;
  background: rgba(0,0,0,0.4);
  padding: 10px 16px;
  border-radius: 10px;
  display: inline-block;
}

/* Buttons */
button, select {
  margin: 8px;
  padding: 10px 16px;
  border: none;
  border-radius: 10px;
  font-size: 0.9rem;
  font-weight: bold;
  cursor: pointer;
}
#pauseBtn { background: #4CAF50; color: #fff; }
#replayBtn { background: #ff7b54; color: #fff; display: none; }
#pauseBtn:hover { background: #2e7d32; }
#replayBtn:hover { background: #ff5722; }
select { border: 1px solid #ccc; font-weight: normal; padding: 6px 12px; }
</style>
</head>
<body>

<div class="card">
  <h2>Composition of Functions</h2>
  <h3>Step by Step Animation</h3>

  <label for="langSelect">üåê Choose Language: </label>
  <select id="langSelect">
    <option value="en">English</option>
    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
    <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
    <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
    <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</option>
  </select>

  <svg viewBox="0 0 1000 400">
    <!-- Domain A -->
    <text class="node" id="A1" x="100" y="80">A1</text>
    <text class="node" id="A2" x="100" y="200">A2</text>
    <text class="node" id="A3" x="100" y="320">A3</text>

    <!-- Codomain B -->
    <text class="node" id="B1" x="450" y="100">B1</text>
    <text class="node" id="B2" x="450" y="200">B2</text>
    <text class="node" id="B3" x="450" y="300">B3</text>

    <!-- Codomain C -->
    <text class="node" id="C1" x="850" y="80">C1</text>
    <text class="node" id="C2" x="850" y="200">C2</text>
    <text class="node" id="C3" x="850" y="320">C3</text>

    <!-- Function f: A ‚Üí B -->
    <line class="edge" id="f1" x1="100" y1="80" x2="450" y2="100"/>
    <line class="edge" id="f2" x1="100" y1="200" x2="450" y2="200"/>
    <line class="edge" id="f3" x1="100" y1="320" x2="450" y2="300"/>

    <!-- Function g: B ‚Üí C -->
    <line class="edge" id="g1" x1="450" y1="100" x2="850" y2="80"/>
    <line class="edge" id="g2" x1="450" y1="200" x2="850" y2="200"/>
    <line class="edge" id="g3" x1="450" y1="300" x2="850" y2="320"/>

    <!-- Composition g‚àòf: A ‚Üí C -->
    <line class="comp-edge" id="gf1" x1="100" y1="80" x2="850" y2="80"/>
    <line class="comp-edge" id="gf2" x1="100" y1="200" x2="850" y2="200"/>
    <line class="comp-edge" id="gf3" x1="100" y1="320" x2="850" y2="320"/>
  </svg>

  <div id="caption" class="caption">Starting Step by Step...</div>
  <br>
  <button id="pauseBtn">‚è∏ Pause</button>
  <button id="replayBtn">üîÑ Replay</button>
</div>

<script>
// Floating math symbols
const symbols=["‚àë","‚àè","‚àö","‚àû","‚à´","Œ∏","Œª","Œî","+","-","√ó","√∑","f(x)","x+y=z"];
for(let i=0;i<50;i++){
  const sym=document.createElement("div");
  sym.className="math-symbol";
  sym.textContent=symbols[Math.floor(Math.random()*symbols.length)];
  sym.style.fontSize=(Math.random()*25+12)+"px";
  sym.style.top=Math.random()*window.innerHeight+"px";
  sym.style.left=Math.random()*window.innerWidth+"px";
  sym.style.color=`hsl(${Math.random()*360},80%,70%)`;
  document.body.appendChild(sym);
  gsap.to(sym,{y:"+="+(Math.random()*600+200),repeat:-1,duration:Math.random()*40+20,ease:"linear"});
}

// Captions
const captions={
  en:[
    "Step 1: Map A1 ‚Üí B1, A2 ‚Üí B2, A3 ‚Üí B3 (Function f)",
    "Step 2: Map B1 ‚Üí C1, B2 ‚Üí C2, B3 ‚Üí C3 (Function g)",
    "Step 3: Composition g‚àòf: A1 ‚Üí C1, A2 ‚Üí C2, A3 ‚Üí C3",
    "Composition combines two functions into one mapping"
  ],
  hi:[
    "‡§ö‡§∞‡§£ 1: A1 ‚Üí B1, A2 ‚Üí B2, A3 ‚Üí B3 ‡§Æ‡•à‡§™‡§ø‡§Ç‡§ó (‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® f)",
    "‡§ö‡§∞‡§£ 2: B1 ‚Üí C1, B2 ‚Üí C2, B3 ‚Üí C3 ‡§Æ‡•à‡§™‡§ø‡§Ç‡§ó (‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§® g)",
    "‡§ö‡§∞‡§£ 3: ‡§∏‡§Æ‡•ç‡§Æ‡§ø‡§≤‡§® g‚àòf: A1 ‚Üí C1, A2 ‚Üí C2, A3 ‚Üí C3",
    "‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® ‡§¶‡•ã ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§è‡§ï ‡§Æ‡•à‡§™‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡§§‡§æ ‡§π‡•à"
  ],
  ta:[
    "‡Æ™‡Æü‡Æø 1: A1 ‚Üí B1, A2 ‚Üí B2, A3 ‚Üí B3 ‡Æµ‡Æ∞‡Øà‡Æ™‡Æü‡ÆÆ‡Øç (Function f)",
    "‡Æ™‡Æü‡Æø 2: B1 ‚Üí C1, B2 ‚Üí C2, B3 ‚Üí C3 ‡Æµ‡Æ∞‡Øà‡Æ™‡Æü‡ÆÆ‡Øç (Function g)",
    "‡Æ™‡Æü‡Æø 3: ‡Æï‡ÆÆ‡Øç‡Æ™‡Øã‡Æö‡Æø‡Æ∑‡Æ©‡Øç g‚àòf: A1 ‚Üí C1, A2 ‚Üí C2, A3 ‚Üí C3",
    "‡Æï‡ÆÆ‡Øç‡Æ™‡Øã‡Æö‡Æø‡Æ∑‡Æ©‡Øç ‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Øç‡Æ™‡Ææ‡Æü‡ØÅ‡Æï‡Æ≥‡Øà ‡Æí‡Æ©‡Øç‡Æ±‡Ææ‡Æï ‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ"
  ],
  te:[
    "‡∞¶‡∞∂ 1: A1 ‚Üí B1, A2 ‚Üí B2, A3 ‚Üí B3 ‡∞Æ‡±ç‡∞Ø‡∞æ‡∞™‡∞ø‡∞Ç‡∞ó‡±ç (‡∞´‡∞Ç‡∞ï‡±ç‡∞∑‡∞®‡±ç f)",
    "‡∞¶‡∞∂ 2: B1 ‚Üí C1, B2 ‚Üí C2, B3 ‚Üí C3 ‡∞Æ‡±ç‡∞Ø‡∞æ‡∞™‡∞ø‡∞Ç‡∞ó‡±ç (‡∞´‡∞Ç‡∞ï‡±ç‡∞∑‡∞®‡±ç g)",
    "‡∞¶‡∞∂ 3: ‡∞ï‡∞æ‡∞Ç‡∞™‡±ã‡∞ú‡∞ø‡∞∑‡∞®‡±ç g‚àòf: A1 ‚Üí C1, A2 ‚Üí C2, A3 ‚Üí C3",
    "‡∞ï‡∞æ‡∞Ç‡∞™‡±ã‡∞ú‡∞ø‡∞∑‡∞®‡±ç ‡∞∞‡±Ü‡∞Ç‡∞°‡±Å ‡∞´‡∞Ç‡∞ï‡±ç‡∞∑‡∞®‡±ç‡∞≤‡∞®‡±Å ‡∞í‡∞ï ‡∞Æ‡±ç‡∞Ø‡∞æ‡∞™‡∞ø‡∞Ç‡∞ó‡±ç‚Äå‡∞≤‡±ã ‡∞ï‡∞≤‡±Å‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø"
  ],
  or:[
    "‡¨™‡¨¶‡¨ï‡≠ç‡¨∞‡¨Æ 1: A1 ‚Üí B1, A2 ‚Üí B2, A3 ‚Üí B3 ‡¨Æ‡≠ç‡≠ü‡¨æ‡¨™‡¨ø‡¨Ç (Function f)",
    "‡¨™‡¨¶‡¨ï‡≠ç‡¨∞‡¨Æ 2: B1 ‚Üí C1, B2 ‚Üí C2, B3 ‚Üí C3 ‡¨Æ‡≠ç‡≠ü‡¨æ‡¨™‡¨ø‡¨Ç (Function g)",
    "‡¨™‡¨¶‡¨ï‡≠ç‡¨∞‡¨Æ 3: ‡¨Ø‡≠ã‡¨ó‡¨´‡¨≥ g‚àòf: A1 ‚Üí C1, A2 ‚Üí C2, A3 ‚Üí C3",
    "‡¨Ø‡≠ã‡¨ó‡¨´‡¨≥ ‡¨¶‡≠Å‡¨á‡¨ü‡¨ø ‡¨´‡¨ô‡≠ç‡¨ï‡¨∏‡¨®‡¨ï‡≠Å ‡¨ó‡≠ã‡¨ü‡¨ø‡¨è ‡¨Æ‡≠ç‡≠ü‡¨æ‡¨™‡¨ø‡¨Ç‡¨∞‡≠á ‡¨Æ‡¨ø‡¨∂‡¨æ‡¨è"
  ]
};

const caption=document.getElementById("caption");
const replayBtn=document.getElementById("replayBtn");
const pauseBtn=document.getElementById("pauseBtn");
const langSelect=document.getElementById("langSelect");
let paused=false, currentStepIndex=0, currentLang="en";

const voicesMap={en:"en-IN",hi:"hi-IN",ta:"ta-IN",te:"te-IN",or:"or-IN"};

function speak(text,lang,callback){
  if(paused) return;
  const u=new SpeechSynthesisUtterance(text);
  u.lang=voicesMap[lang]||"en-IN";
  u.rate=0.95;
  u.onend=()=>{if(!paused) callback();}
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(u);
}

function runStep(){
  if(currentStepIndex>=captions[currentLang].length){replayBtn.style.display="inline-block"; return;}
  caption.textContent=captions[currentLang][currentStepIndex];

  // Animate step by step
  if(currentStepIndex===0){
    gsap.to(["#f1","#f2","#f3"],{opacity:1,duration:1.5, stagger:0.5});
  } else if(currentStepIndex===1){
    gsap.to(["#g1","#g2","#g3"],{opacity:1,duration:1.5, stagger:0.5});
  } else if(currentStepIndex===2){
    gsap.to(["#gf1","#gf2","#gf3"],{opacity:1,duration:1.5, stagger:0.5});
  }

  speak(captions[currentLang][currentStepIndex],currentLang,()=>{
    currentStepIndex++;
    if(!paused) setTimeout(runStep,700);
  });
}

function playAnimation(){
  replayBtn.style.display="none";
  paused=false;
  currentStepIndex=0;
  currentLang=langSelect.value;
  gsap.set(".edge",{opacity:0});
  gsap.set(".comp-edge",{opacity:0});
  runStep();
}

pauseBtn.addEventListener("click",()=>{
  if(!paused){paused=true; window.speechSynthesis.cancel(); pauseBtn.textContent="‚ñ∂ Play";}
  else{paused=false; pauseBtn.textContent="‚è∏ Pause"; runStep();}
});
replayBtn.addEventListener("click",playAnimation);
langSelect.addEventListener("change",()=>{
  currentLang=langSelect.value;
  if(!paused) playAnimation();
  else caption.textContent=captions[currentLang][currentStepIndex]||captions[currentLang][0];
});

playAnimation();
</script>
</body>
</html>
