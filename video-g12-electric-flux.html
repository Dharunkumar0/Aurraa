<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Electric Flux & Gauss's Law тАФ Animated</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<style>
body {
  margin:0;
  font-family:"Poppins",sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  height:100vh;
  overflow:hidden;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
  text-align:center;
}
h2,h3{margin:5px 0;}
.card{
  padding:16px;
  max-width:900px;
  width:95%;
}
.propsCard{
  background:rgba(0,0,0,0.6);
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,0.5);
  padding:20px;
  margin-top:16px;
  min-height:420px;
  position:relative;
}
.animationBox{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  opacity:0;
  pointer-events:none;
}
button, select{
  margin:8px;
  padding:10px 16px;
  border:none;
  border-radius:10px;
  font-size:0.9rem;
  font-weight:bold;
  cursor:pointer;
}
#replayBtn{background:#ff7b54;color:#fff;display:none;}
#pauseBtn{background:#4CAF50;color:#fff;}
#replayBtn:hover{background:#ff5722;}
#pauseBtn:hover{background:#2e7d32;}
select{
  border:1px solid #fff;
  font-weight:normal;
  padding:6px 12px;
  color:#fff;
  background:rgba(0,0,0,0.2);
}
.caption {
  font-size: 1rem;
  margin-top: 12px;
  padding: 12px 16px;
  border-radius: 12px;
  display: inline-block;
  color: #fff;
  background: rgba(0,0,0,0.4);
  text-align: center;
  box-shadow: 0 4px 15px rgba(0,0,0,0.4);
  opacity: 0;
}
.caption .formula {
  margin-top: 6px;
  font-size: 1.1rem;
  color: #ffeb3b;
  font-weight: bold;
  background: rgba(255,255,255,0.1);
  padding: 4px 8px;
  border-radius: 8px;
  display: inline-block;
  opacity: 0;
}
svg line{stroke:#fff; stroke-width:2; marker-end:url(#arrowhead);}
</style>
</head>
<body>

<h2>Electric Flux & Gauss's Law</h2>
<h3>Physics тАФ Electrostatics</h3>

<label for="langSelect">ЁЯМР Choose Language: </label>
<select id="langSelect">
  <option value="en">English</option>
  <option value="hi">рд╣рд┐рдиреНрджреА</option>
  <option value="ta">родрооро┐ро┤рпН</option>
  <option value="te">р░др▒Жр░▓р▒Бр░Чр▒Б</option>
  <option value="or">рмУрмбрм╝рм┐рмЖ</option>
</select>

<div class="card">
  <div class="propsCard">

    <svg width="0" height="0">
      <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
          <polygon points="0 0, 10 4, 0 8" fill="#fff"></polygon>
        </marker>
      </defs>
    </svg>

    <!-- Animations for 9 steps -->
    <div id="anim1" class="animationBox">
      <svg width="420" height="200">
        <circle cx="210" cy="100" r="20" fill="#ff5252"/>
      </svg>
    </div>

    <div id="anim2" class="animationBox">
      <svg width="420" height="200">
        <rect x="160" y="60" width="100" height="80" fill="rgba(0,255,255,0.2)" stroke="#00fff0"/>
        <line x1="210" y1="100" x2="210" y2="0"/>
        <line x1="210" y1="100" x2="210" y2="200"/>
        <line x1="210" y1="100" x2="100" y2="100"/>
        <line x1="210" y1="100" x2="320" y2="100"/>
      </svg>
    </div>

    <div id="anim3" class="animationBox">
      <svg width="420" height="200">
        <rect x="160" y="40" width="100" height="120" fill="rgba(0,255,255,0.2)" stroke="#00fff0" transform="rotate(90,210,100)"/>
        <line x1="210" y1="100" x2="210" y2="0"/>
        <line x1="210" y1="100" x2="210" y2="200"/>
      </svg>
    </div>

    <div id="anim4" class="animationBox">
      <svg width="420" height="200">
        <circle cx="210" cy="100" r="50" fill="rgba(255,255,0,0.2)" stroke="#ffff00"/>
        <line x1="160" y1="100" x2="260" y2="100"/>
      </svg>
    </div>

    <div id="anim5" class="animationBox">
      <svg width="420" height="200">
        <circle cx="210" cy="100" r="40" fill="rgba(255,0,0,0.2)" stroke="#ff5252"/>
        <line x1="210" y1="60" x2="210" y2="20"/>
        <line x1="210" y1="140" x2="210" y2="180"/>
        <line x1="170" y1="100" x2="130" y2="100"/>
        <line x1="250" y1="100" x2="290" y2="100"/>
      </svg>
    </div>

    <div id="anim6" class="animationBox">
      <svg width="420" height="200">
        <circle cx="210" cy="100" r="40" fill="rgba(0,255,255,0.2)" stroke="#00fff0"/>
        <line x1="170" y1="100" x2="250" y2="100" stroke="#fff" stroke-width="2" marker-end="url(#arrowhead)"/>
      </svg>
    </div>

    <div id="anim7" class="animationBox">
      <svg width="420" height="200">
        <circle cx="120" cy="100" r="30" fill="rgba(255,0,0,0.2)" stroke="#ff5252"/>
        <rect x="180" y="70" width="60" height="60" fill="rgba(0,255,0,0.2)" stroke="#00ff00"/>
        <rect x="260" y="90" width="120" height="20" fill="rgba(255,255,0,0.2)" stroke="#ffff00"/>
      </svg>
    </div>

    <div id="anim8" class="animationBox">
      <svg width="420" height="200">
        <circle cx="120" cy="100" r="20" fill="rgba(255,0,0,0.2)" stroke="#ff5252"/>
        <line x1="120" y1="100" x2="120" y2="50" stroke="#fff" stroke-width="2" marker-end="url(#arrowhead)"/>
        <rect x="200" y="50" width="20" height="100" fill="rgba(0,255,255,0.2)" stroke="#00fff0"/>
      </svg>
    </div>

    <div id="anim9" class="animationBox">
      <svg width="420" height="200">
        <circle cx="100" cy="100" r="20" fill="rgba(255,0,0,0.2)" stroke="#ff5252"/>
        <circle cx="200" cy="100" r="20" fill="rgba(0,255,0,0.2)" stroke="#00ff00"/>
        <circle cx="300" cy="100" r="20" fill="rgba(0,0,255,0.2)" stroke="#448aff"/>
        <line x1="100" y1="100" x2="100" y2="50" stroke="#fff" stroke-width="2" marker-end="url(#arrowhead)"/>
        <line x1="200" y1="100" x2="200" y2="50" stroke="#fff" stroke-width="2" marker-end="url(#arrowhead)"/>
        <line x1="300" y1="100" x2="300" y2="50" stroke="#fff" stroke-width="2" marker-end="url(#arrowhead)"/>
      </svg>
    </div>

  </div>

  <!-- Caption + Formula Box -->
  <div id="captionBox" class="caption">
    <div id="captionText">Let's learn Electric Flux!</div>
    <div id="formulaText" class="formula">╬ж = E ┬╖ A ┬╖ cos╬╕</div>
  </div>
  <br>
  <button id="pauseBtn">тП╕ Pause</button>
  <button id="replayBtn">ЁЯФД Replay</button>
  <button id="finishBtn" style="background: #2196F3; color: #fff;">тЬУ Finish</button>
</div>

<script>
// Add styles for finish button hover
const style = document.createElement('style');
style.textContent = `
  #finishBtn:hover {
    background: #1976D2 !important;
    transform: translateY(-2px);
  }
`;
document.head.appendChild(style);
const captionBox = document.getElementById("captionBox");
const captionText = document.getElementById("captionText");
const formulaText = document.getElementById("formulaText");
const replayBtn = document.getElementById("replayBtn");
const pauseBtn = document.getElementById("pauseBtn");
const langSelect = document.getElementById("langSelect");

let paused=false, stepIndex=0, currentLang="en";

const captions = {
  en:[
    "Let's learn Electric Flux!",
    "Electric flux depends on both the electric field and the surface area.",
    "Flux is maximum when the field is perpendicular to the surface.",
    "Flux is zero when the field is parallel to the surface.",
    "For closed surfaces, GaussтАЩs Law simplifies electric field calculations.",
    "GaussтАЩs Law formula: ╬ж = Q_enclosed/╬╡тВА",
    "Spherical, cylindrical, and planar symmetries are commonly used.",
    "GaussтАЩs Law is especially useful for uniformly charged shells and wires.",
    "Understanding symmetry helps determine electric field efficiently."
  ],
  hi:[
    "рдЖрдЗрдП рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдлреНрд▓рдХреНрд╕ рд╕реАрдЦреЗрдВ!",
    "рд╡рд┐рджреНрдпреБрдд рдлреНрд▓рдХреНрд╕ рд╡рд┐рджреНрдпреБрдд рдХреНрд╖реЗрддреНрд░ рдФрд░ рд╕рддрд╣ рдХреЗ рдХреНрд╖реЗрддреНрд░рдлрд▓ рджреЛрдиреЛрдВ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред",
    "рдлреНрд▓рдХреНрд╕ рдЕрдзрд┐рдХрддрдо рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдХреНрд╖реЗрддреНрд░ рд╕рддрд╣ рдХреЗ рд▓рдВрдмрд╡рдд рд╣реЛрддрд╛ рд╣реИред",
    "рдлреНрд▓рдХреНрд╕ рд╢реВрдиреНрдп рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдХреНрд╖реЗрддреНрд░ рд╕рддрд╣ рдХреЗ рд╕рдорд╛рдирд╛рдВрддрд░ рд╣реЛрддрд╛ рд╣реИред",
    "рдмрдВрдж рд╕рддрд╣реЛрдВ рдХреЗ рд▓рд┐рдП, рдЧрд╛рдЙрд╕ рдХрд╛ рдирд┐рдпрдо рд╡рд┐рджреНрдпреБрдд рдХреНрд╖реЗрддреНрд░ рдХреА рдЧрдгрдирд╛ рд╕рд░рд▓ рдмрдирд╛рддрд╛ рд╣реИред",
    "рдЧрд╛рдЙрд╕ рдХрд╛ рдирд┐рдпрдо рд╕реВрддреНрд░: ╬ж = Q_enclosed/╬╡тВА",
    "рдЧреЛрд▓рд╛рдХрд╛рд░, рд╕рд┐рд▓реЗрдВрдбреНрд░рд┐рдХ рдФрд░ рд╕рдорддрд▓реАрдп рд╕рдордорд┐рддрд┐ рдЖрдорддреМрд░ рдкрд░ рдЙрдкрдпреЛрдЧ рд╣реЛрддреА рд╣реИред",
    "рдЧрд╛рдЙрд╕ рдХрд╛ рдирд┐рдпрдо рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдЖрд╡реЗрд╢рд┐рдд рд╢реЗрд▓реНрд╕ рдФрд░ рддрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧреА рд╣реИред",
    "рд╕рдордорд┐рддрд┐ рдХреЛ рд╕рдордЭрдирд╛ рд╡рд┐рджреНрдпреБрдд рдХреНрд╖реЗрддреНрд░ рдХреЛ рдХреБрд╢рд▓рддрд╛рдкреВрд░реНрд╡рдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред"
  ],
  ta:[
    "рооро┐ройрпНродроЯроЩрпНроХро▓рпИ роХро▒рпНрокрпЛроорпН!",
    "рооро┐ройрпНродроЯроЩрпНроХрпБ рооро┐ройрпНро╡рпАродро┐ рооро▒рпНро▒рпБроорпН роорпЗро▒рпНрокро░рокрпНрокро┐ройрпН рокро░рокрпНрокро│ро╡рпИ роЪро╛ро░рпНроирпНродродрпБ.",
    "роорпЗро▒рпНрокро░рокрпНрокро┐ро▒рпНроХрпБ роЪрпЖроЩрпНроХрпБродрпНродро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, родроЯроЩрпНроХрпБ роЕродро┐роХрооро╛роХ роЗро░рпБроХрпНроХрпБроорпН.",
    "роорпЗро▒рпНрокро░рокрпНрокро┐ро▒рпНроХрпБ роЗрогрпИропро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, родроЯроЩрпНроХрпБ роЪрпБро┤ро▒рпНроЪро┐ роЗро▓рпНро▓ро╛рооро▓рпН роЗро░рпБроХрпНроХрпБроорпН.",
    "роорпВроЯро┐роп роорпЗро▒рпНрокро░рокрпНрокрпБроХро│рпБроХрпНроХрпБ, роХро╛ро╕рпН ро╡ро┐родро┐ рооро┐ройрпНро╡рпАродро┐ропро┐ройрпН роХрогроХрпНроХрпБроХро│рпИ роОро│ро┐родро╛роХрпНроХрпБроХро┐ро▒родрпБ.",
    "роХро╛ро╕рпН ро╡ро┐родро┐ роЪрооро┐роХрпНроЮрпИ: ╬ж = Q_enclosed/╬╡тВА",
    "ро╡роЯрпНроЯро╛ро░, роЪро┐ро▓ро┐рогрпНроЯро░рпН рооро▒рпНро▒рпБроорпН роЪроородро│ роЪроороЪрпНроЪрпАро░рпНроХро│рпН рокрпКродрпБро╡ро╛роХрокрпН рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроХро┐ройрпНро▒рой.",
    "роТро░рпЗ рооро╛родро┐ро░ро┐ропро╛роХ роЪро╛ро░рпНроЬрпН роЪрпЖропрпНропрокрпНрокроЯрпНроЯ ро╖рпЖро▓рпНроХро│рпБроХрпНроХрпБроорпН роХроорпНрокро┐роХро│рпБроХрпНроХрпБроорпН роХро╛ро╕рпН ро╡ро┐родро┐ рооро┐роХро╡рпБроорпН рокропройрпБро│рпНро│родрпБ.",
    "роЪроороЪрпНроЪрпАро░рпН роорпБро▒рпИропрпИрокрпН рокрпБро░ро┐роирпНродрпБроХрпКро│рпНро╡родро╛ро▓рпН рооро┐ройрпНро╡рпАродро┐ роХрогроХрпНроХрпАроЯрпБ роОро│ро┐родро╛роХ роЪрпЖропрпНропро▓ро╛роорпН."
  ],
  te:[
    "р░Ор░▓р░Хр▒Нр░Яр▒Нр░░р░┐р░Хр▒Н р░лр▒Нр░▓р▒Л р░ир▒Зр░░р▒Нр░Ър▒Бр░Хр▒Бр░Вр░жр░╛р░В!",
    "р░╡р░┐р░жр▒Нр░пр▒Бр░др▒Н р░кр▒Нр░░р░╡р░╛р░╣р░В р░╡р░┐р░жр▒Нр░пр▒Бр░др▒Н р░╢р░Хр▒Нр░др░┐ р░ор░░р░┐р░пр▒Б р░Йр░кр░░р░┐р░др░▓ р░╡р░┐р░╕р▒Нр░др▒Ар░░р▒Нр░гр░Вр░кр▒И р░Жр░зр░╛р░░р░кр░бр░┐ р░Йр░Вр░Яр▒Бр░Вр░жр░┐.",
    "р░лр▒Ар░▓р▒Нр░бр▒Н р░Йр░кр░░р░┐р░др░▓р░╛р░ир░┐р░Хр░┐ р░ир░┐р░▓р▒Бр░╡р▒Бр░Чр░╛ р░Йр░ир▒Нр░ир░кр▒Нр░кр▒Бр░бр▒Б р░кр▒Нр░░р░╡р░╛р░╣р░В р░Чр░░р░┐р░╖р▒Нр░Яр░Вр░Чр░╛ р░Йр░Вр░Яр▒Бр░Вр░жр░┐.",
    "р░лр▒Ар░▓р▒Нр░бр▒Н р░Йр░кр░░р░┐р░др░▓р░╛р░ир░┐р░Хр░┐ р░╕р░ор░╛р░Вр░др░░р░Вр░Чр░╛ р░Йр░ир▒Нр░ир░кр▒Нр░кр▒Бр░бр▒Б р░кр▒Нр░░р░╡р░╛р░╣р░В р░╢р▒Вр░ир▒Нр░пр░В р░Ер░╡р▒Бр░др▒Бр░Вр░жр░┐.",
    "р░ор▒Вр░др░мр░бр░┐р░и р░Йр░кр░░р░┐р░др░▓р░╛р░▓ р░Хр▒Лр░╕р░В, р░Чр░╛р░╕р▒Н р░ир▒Нр░пр░╛р░пр░В р░╡р░┐р░жр▒Нр░пр▒Бр░др▒Н р░╢р░Хр▒Нр░др░┐ р░▓р▒Жр░Хр▒Нр░Хр░┐р░Вр░кр▒Бр░▓р░ир▒Б р░╕р░░р░│р░В р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐.",
    "р░Чр░╛р░╕р▒Н р░ир▒Нр░пр░╛р░пр░В р░╕р░ор▒Ар░Хр░░р░гр░В: ╬ж = Q_enclosed/╬╡тВА",
    "р░╕р▒Нр░лр▒Жр░░р░┐р░пр░▓р▒Н, р░╕р░┐р░▓р░┐р░Вр░бр▒Нр░░р░┐р░Хр░▓р▒Н р░ор░░р░┐р░пр▒Б р░кр▒Нр░▓р▒Зр░ир▒Н р░╕р░ор░ор░┐р░др▒Бр░▓р▒Б р░╕р░╛р░зр░╛р░░р░гр░Вр░Чр░╛ р░Йр░кр░пр▒Лр░Чр░┐р░╕р▒Нр░др░╛р░пр░┐.",
    "р░╕р░ор░╛р░ир░Вр░Чр░╛ р░Ър░╛р░░р▒Нр░Ьр▒Н р░Ър▒Зр░пр░мр░бр░┐р░и р░╖р▒Жр░▓р▒Нр░╕р▒Н р░ор░░р░┐р░пр▒Б р░╡р▒Ир░░р▒Нр░▓р░Хр▒Б р░Чр░╛р░╕р▒Н р░ир▒Нр░пр░╛р░пр░В р░Ър░╛р░▓р░╛ р░Йр░кр░пр▒Лр░Чр░Хр░░р░Вр░Чр░╛ р░Йр░Вр░Яр▒Бр░Вр░жр░┐.",
    "р░╕р░ор░ор░┐р░др░┐р░ир░┐ р░Ер░░р▒Нр░ер░В р░Ър▒Зр░╕р▒Бр░Хр▒Лр░╡р░бр░В р░жр▒Нр░╡р░╛р░░р░╛ р░╡р░┐р░жр▒Нр░пр▒Бр░др▒Н р░╢р░Хр▒Нр░др░┐р░ир░┐ р░╕р░ор░░р▒Нр░ер░╡р░Вр░др░Вр░Чр░╛ р░ир░┐р░░р▒Нр░гр░пр░┐р░Вр░Ър░╡р░Ър▒Нр░Ър▒Б."
  ],
  or:[
    "рммрм┐рмжрнНрнЯрнБрмдрнН рмлрнНрм▓рмХрнНрм╕рнН рм╕рм┐рмЦрм┐рммрм╛!",
    "рммрм┐рмжрнНрнЯрнБрмдрнН рмлрнНрм▓рмХрнНрм╕рнН рммрм┐рмжрнНрнЯрнБрмдрнН рмХрнНрм╖рнЗрмдрнНрм░ рмПрммрмВ рм╕рмдрм╣рм░ рмЕрмЮрнНрмЪрм│ рмЙрмкрм░рнЗ рмирм┐рм░рнНрмнрм░ рмХрм░рнЗред",
    "рмХрнНрм╖рнЗрмдрнНрм░ рм╕рмдрм╣рмХрнБ рм▓рморнНрмм рмнрм╛рммрм░рнЗ рмерм┐рм▓рнЗ, рмлрнНрм▓рмХрнНрм╕рнН рм╕рм░рнНрммрм╛рмзрм┐рмХ рм╣рнБрмПред",
    "рмХрнНрм╖рнЗрмдрнНрм░ рм╕рмдрм╣рмХрнБ рм╕рморм╛рмирм╛рмирнНрмдрм░ рм╣рнЗрм▓рнЗ, рмлрнНрм▓рмХрнНрм╕рнН рм╢рнВрмирнНрнЯ рм╣рнБрмПред",
    "рммрмирнНрмж рм╕рмдрм╣рм░рнЗ, рмЧрм╛рмЙрм╕рнН рм╕рм┐рмжрнНрмзрм╛рмирнНрмд рморм╛рмкрм┐рммрм╛рмХрнБ рм╕рм╣рмЬ рмХрм░рнЗред",
    "рмЧрм╛рмЙрм╕рнН рм╕рм┐рмжрнНрмзрм╛рмирнНрмд рм╕рморнАрмХрм░рмг: ╬ж = Q_enclosed/╬╡тВА",
    "рм╕рмлрм│, рм╕рм┐рм▓рм┐рмгрнНрмбрм░, рмПрммрмВ рм╕рмормдрм│ рм╕рморморм┐рмдрм┐ рм╕рм╛рмзрм╛рм░рмгрмдрмГ рммрнНрнЯрммрм╣рнГрмд рм╣рнБрмПред",
    "рмЧрм╛рмЙрм╕рнН рм╕рм┐рмжрнНрмзрм╛рмирнНрмд рм╕рморм╛рми рмнрм╛рммрнЗ рмЖрммрнЗрм╢рм┐рмд рм╢рнЗрм▓рнН рмУ рмдрм╛рм░ рмкрм╛рмЗрмБ рммрм┐рм╢рнЗрм╖ рмЙрмкрмпрнБрмХрнНрмдред",
    "рм╕рморморм┐рмдрм┐ рммрнБрмЭрм┐рммрм╛рм░рнБ рммрм┐рмжрнНрнЯрнБрмд рмХрнНрм╖рнЗрмдрнНрм░ рмХрнБ рмжрмХрнНрм╖рмдрм╛рм░ рм╕рм╣рм┐рмд рмирм┐рм░рнНрмгрнНрмгрнЯ рмХрм░рм╛рмпрм╛рмЗрмкрм╛рм░рнЗред"
  ]
};

const voicesMap = {en:"en-IN",hi:"hi-IN",ta:"ta-IN",te:"te-IN",or:"or-IN"};

function speak(text,lang,callback){
  if(paused) return;
  const utter=new SpeechSynthesisUtterance(text);
  utter.lang=voicesMap[lang]||"en-IN";
  utter.rate=1.1;
  utter.onend=()=>{ if(!paused) callback(); };
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(utter);
}

function hideAllAnimations(){
  for(let i=1;i<=9;i++){
    gsap.to("#anim"+i,{opacity:0,duration:0.5});
  }
}

function runStep() {
  if(stepIndex >= captions[currentLang].length){
    replayBtn.style.display = "inline-block";
    return;
  }

  gsap.to([captionBox, formulaText], {opacity: 0, duration: 0.3, onComplete: () => {
    captionText.textContent = captions[currentLang][stepIndex];
    formulaText.textContent = (stepIndex >= 1) ? "╬ж = E ┬╖ A ┬╖ cos╬╕" : "╬ж = E ┬╖ A ┬╖ cos╬╕";

    gsap.to(captionBox, {opacity: 1, duration: 0.5});
    gsap.to(formulaText, {opacity: 1, duration: 0.5, delay:0.2});

    if(stepIndex>=1 && stepIndex<=9){
      hideAllAnimations();
      gsap.to("#anim"+stepIndex,{opacity:1,duration:1,scale:1});
    }

    speak(captions[currentLang][stepIndex], currentLang, ()=>{
      stepIndex++;
      if(!paused) runStep();
    });
  }});
}

function resetAnimation(){
  hideAllAnimations();
  stepIndex=0;
  captionText.textContent = captions[currentLang][0];
  formulaText.textContent = "╬ж = E ┬╖ A ┬╖ cos╬╕";
  gsap.to([captionBox, formulaText], {opacity:1,duration:0.5});
}

langSelect.addEventListener("change", ()=>{
  currentLang=langSelect.value;
  paused=false;
  window.speechSynthesis.cancel();
  resetAnimation();
  replayBtn.style.display="none";
  runStep();
});

pauseBtn.addEventListener("click", ()=>{
  paused=!paused;
  if(paused) window.speechSynthesis.cancel();
  else runStep();
  pauseBtn.textContent=paused?"тЦ╢ Resume":"тП╕ Pause";
});

replayBtn.addEventListener("click", ()=>{
  window.speechSynthesis.cancel();
  resetAnimation();
  paused=false;
  replayBtn.style.display="none";
  runStep();
});

document.getElementById('finishBtn').addEventListener('click', () => {
  window.location.href = 'game-g12-gauss.html';
});

runStep();
</script>
</body>
</html>
